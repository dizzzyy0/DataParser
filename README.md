
---

# Data Parser (JSON to PostgreSQL)

Цей проєкт є ефективним рішенням для обробки великих JSON-файлів та завантаження їхніх даних у базу даних PostgreSQL. Все рішення інкапсульовано в Docker з жорстким обмеженням на використання оперативної пам'яті (100 МБ).

## Технології

- **Node.js 18** (Alpine)
- **PostgreSQL 14** (Alpine)
- **JSONStream** для потокового парсингу JSON
- **Docker & Docker Compose** для контейнеризації та оркестрації

## Структура проєкту

```plaintext
DataParser/
├── data/                 # Сюди створиться великий JSON-файл
├── db/
│   └── db.js             # Модуль для підключення до бази даних
├── docker-compose.yaml   # Конфігурація Docker Compose для сервісів
├── Dockerfile            # Інструкція для створення образу Node.js-застосунку
├── generate_data.js      # Скрипт для створення великого JSON-файлу
├── package.json          # Залежності та скрипти проєкту
└── script.js             # Основний скрипт для обробки даних
```

## Передумови

Перед початком роботи переконайтеся, що на вашому комп'ютері встановлено:

- **Docker**
- **Docker Compose**

## Встановлення та запуск

1.  **Клонуйте репозиторій або створіть проєкт:**
    Якщо ви клонуєте готовий репозиторій:
    ```bash
    git clone https://github.com/dizzzyy0/DataParser.git
    cd DataParser
    ```

2.  **Підготуйте дані:**
    Запустіть скрипт `generate_data.js` за допомогою Node.js, щоб створити тестовий JSON-файл у правильному місці та форматі.
   ```bash
   node generate_data.js
   ```
   Ця команда створить файл `large_data.json` у папці `data/`.

3.  **Запустіть Docker Compose:**
    Відкрийте термінал у кореневій папці проєкту та виконайте наступну команду:
    ```bash
    docker-compose run --build --rm app
    ```

## Перевірка результатів

Після того, як скрипт завершить роботу, контейнер `postgres` продовжить працювати у фоновому режимі. Ви можете підключитися до бази даних для перевірки даних.

1.  **Запустіть сервіс бази даних у фоновому режимі (якщо він ще не запущений):**
    ```bash
    docker-compose up -d postgres
    ```

2.  **Підключіться до контейнера PostgreSQL:**
    Виконайте команду, щоб отримати доступ до командного рядка всередині контейнера:
    ```bash
    docker-compose exec postgres psql -U user -d jsonparserdb
    ```

3.  **Виконайте SQL-запити:**
    Після підключення ви можете виконувати будь-які SQL-запити. Наприклад:
    ```sql
    SELECT COUNT(*) FROM users;

    SELECT * FROM users LIMIT 10;
    ```
    Для виходу з `psql` введіть `\q` і натисніть Enter.

## Зупинка та очищення

Коли ви закінчили роботу та перевірку, ви можете повністю зупинити всі сервіси та очистити ресурси.

**УВАГА:** Наступна команда **видалить усі дані** у вашій базі даних.

```bash
docker-compose down -v
```
